{
  "version": "1.0",
  "functions": {
    "factorial": {
      "states": [
        {
          "name": "FactorialEntry",
          "local_vars": 1,
          "operations": [
            {
              "type": "push_stack",
              "entries": [
                {
                  "Value": {
                    "FactorialInput": {
                      "var": "n"
                    }
                  }
                },
                {
                  "Retrn": "FactorialDone"
                },
                {
                  "Value": {
                    "FactorialArgument": {
                      "var": "n"
                    }
                  }
                },
                {
                  "State": "FactorialRecursiveCall"
                }
              ]
            }
          ]
        },
        {
          "name": "FactorialRecursiveCall",
          "local_vars": 1,
          "operations": [
            {
              "type": "write",
              "text": "f({n})",
              "next_state": "FactorialRecursionPostWrite"
            }
          ]
        },
        {
          "name": "FactorialRecursionPostWrite",
          "local_vars": 1,
          "operations": [
            {
              "type": "sleep",
              "ms": {
                "mul": [
                  {
                    "var": "n"
                  },
                  {
                    "const": 50
                  }
                ]
              },
              "next_state": "FactorialRecursionPostSleep"
            }
          ]
        },
        {
          "name": "FactorialRecursionPostSleep",
          "local_vars": 1,
          "operations": [
            {
              "type": "conditional",
              "condition": {
                "le": [
                  {
                    "var": "n"
                  },
                  {
                    "const": 1
                  }
                ]
              },
              "then": [
                {
                  "type": "return",
                  "value": {
                    "const": 1
                  }
                }
              ],
              "else": [
                {
                  "type": "push_stack",
                  "entries": [
                    {
                      "Retrn": "FactorialRecursionPostRecursiveCall"
                    },
                    {
                      "Value": {
                        "FactorialArgument": {
                          "sub": [
                            {
                              "var": "n"
                            },
                            {
                              "const": 1
                            }
                          ]
                        }
                      }
                    },
                    {
                      "State": "FactorialRecursiveCall"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "FactorialRecursionPostRecursiveCall",
          "local_vars": 2,
          "operations": [
            {
              "type": "return",
              "value": {
                "mul": [
                  {
                    "var": "n"
                  },
                  {
                    "var": "result"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "FactorialDone",
          "local_vars": 2,
          "operations": [
            {
              "type": "done"
            }
          ]
        }
      ]
    }
  },
  "entry_point": "factorial"
}